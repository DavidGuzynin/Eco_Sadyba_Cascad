<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ï–∫–æ–°–∞–¥–∏–±–∞ "–ö–∞—Å–∫–∞–¥"</title>
  <link rel="icon" href="https://i.postimg.cc/Y25zBS7Z/cropped-image.png" type="image/jpeg"/>

  <style>
    /* CSS: exactly as your original design */
    body {
      padding-top: 60px;    /* push content below top bar */
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #eef7f1;
    }
    #topBar {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 60px;
      background-color: #4caf50;
      display: flex;
      align-items: center;
      padding: 0 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 10000;
    }
    #menuIcon {
      font-size: 1.5rem;
      color: #fff;
      cursor: pointer;
      user-select: none;
    }
    #topBarTitle {
      margin-left: 12px;
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
    }
    #menuDropdown {
      display: none;
      position: fixed;
      top: 60px; left: 0;
      width: 200px;
      background-color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      border-bottom-right-radius: 8px;
      z-index: 10000;
    }
    #menuDropdown ul {
      list-style: none;
      margin: 0;
      padding: 8px 0;
    }
    #menuDropdown li + li {
      margin-top: 4px;
    }
    #menuDropdown a {
      display: block;
      padding: 8px 16px;
      text-decoration: none;
      color: #2e7d32;
      font-weight: 500;
    }
    #menuDropdown a:hover {
      background-color: #f1f8e9;
    }

    /* Site Header */
    .site-header {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      z-index: 4;
      margin-top: 70px;
    }
    .header-box {
      display: inline-block;
      background-color: #fff;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .site-header h1 {
      margin: 0;
      font-size: 2.5em;
      color: #2e7d32;
      font-weight: 600;
    }

    /* Carousel */
    .carousel-container {
      position: relative;
      width: 100%;
      height: 80vh;
      overflow: hidden;
      margin-top: 0;
    }
    .carousel-slide {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .carousel-image {
      position: absolute;
      top: -20px;
      left: 0;
      width: 100%;
      height: calc(100% + 100px);
      object-fit: cover;
      object-position: center;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    .carousel-image:nth-child(3) {
      top: -40px;
      height: calc(100% + 80px);
      object-position: center bottom;
    }
    .carousel-image.active {
      opacity: 1;
      z-index: 1;
    }
    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(76,175,80,0.2);
      pointer-events: none;
      z-index: 2;
    }
    .dots {
      position: absolute;
      bottom: 15px;
      width: 100%;
      text-align: center;
      z-index: 3;
    }
    .dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      margin: 0 4px;
      background-color: #bbb;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .dot.active {
      background-color: #4caf50;
    }

    /* Sections */
    .step-section {
      display: flex;
      width: 100%;
      justify-content: flex-start;
      margin: 80px 0;
      padding-inline: 20px;
    }
    .step-section.right {
      justify-content: flex-start;
    }
    .step-section.right .step-box {
      margin-left: auto;
      margin-right: 50px;
    }
    .step-box {
      max-width: 600px;
      width: 100%;
      background-color: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      text-align: center;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 1s ease, transform 1s ease;
    }
    .step-box h2 {
      font-size: 2em;
      color: #2e7d32;
      margin-bottom: 20px;
    }
    .step-box h3 {
      font-size: 1.5em;
      color: #2e7d32;
      margin-top: 24px;
      margin-bottom: 12px;
    }
    .step-box img {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }
    .step-box p {
      font-size: 1.2em;
      color: #2e7d32;
      font-weight: 500;
      margin: 0 0 16px 0;
    }
    .step-box iframe {
      width: 100%;
      height: 300px;
      border: 0;
      border-radius: 12px;
    }
    @media (max-width: 768px) {
      .step-section {
        flex-direction: column;
        align-items: center;
      }
      .step-section.right .step-box {
        margin-left: 0;
        margin-right: 0;
      }
    }

    /* Pricing Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
    }
    th {
      background-color: #4caf50;
      color: #fff;
    }

    /* Chat Toggle & Overlays */
    #chatToggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #4caf50;
      color: #fff;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    #namePrompt, #chatOverlay {
      position: fixed;
      bottom: 90px;
      left: 20px;
      width: 300px;
      max-width: 90vw;
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      padding: 16px;
      display: none;
      flex-direction: column;
      z-index: 1001;
      text-align: center;
    }
    #namePrompt div {
      font-weight: bold;
      margin-bottom: 6px;
      color: #2e7d32;
      font-size: 1.05rem;
    }
    #namePrompt input {
      padding: 8px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 12px;
      width: 100%;
      box-sizing: border-box;
    }
    #namePrompt button {
      padding: 8px;
      background: #4caf50;
      color: #fff;
      border: none;
      width: 100%;
      border-radius: 6px;
      cursor: pointer;
    }
    #chatOverlay {
      padding: 0;
    }
    #chatHeader {
      background-color: #28a745;
      color: white;
      padding: 0.75rem 1rem;
      font-weight: bold;
      font-size: 1.1rem;
      text-align: center;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
    }
    #chatMessages {
      flex: 1;
      display: flex;
      flex-direction: column;
      max-height: 200px;
      overflow-y: auto;
      padding: 8px;
      background: #f1f8e9;
    }
    #chatMessages .msg.from-user {
      align-self: flex-start;
      margin-right: auto;
      background: #c8e6c9;
      text-align: left;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 6px;
      white-space: pre-wrap;
    }
    #chatMessages .msg.from-bot {
      align-self: flex-end;
      margin-left: auto;
      background: #fff9c4;
      text-align: right;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 6px;
      white-space: pre-wrap;
    }
    .chat-input {
      display: flex;
      border-top: 1px solid #ddd;
    }
    .chat-input textarea {
      flex: 1;
      border: none;
      padding: 0.5rem;
      resize: none;
      font-size: 1rem;
      height: 40px;
      box-sizing: border-box;
      outline: none;
    }
    .chat-input button {
      background: none;
      border: none;
      padding: 0 0.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .chat-input button svg {
      width: 20px;
      height: 20px;
      fill: #4caf50;
    }
    .powered-by {
      text-align: center;
      font-size: 0.85rem;
      color: #555;
      margin: 6px 0;
    }
    .powered-by a {
      color: #2e7d32;
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <!-- Top Bar & Menu -->
  <header id="topBar">
    <div id="menuIcon">‚ò∞</div>
    <div id="topBarTitle">–ú–µ–Ω—é</div>
  </header>
  <nav id="menuDropdown">
    <ul>
      <li><a href="#home">üè† –ì–æ–ª–æ–≤–Ω–∞</a></li>
      <li><a href="#pricing">üí∞ –¶—ñ–Ω–∏ –Ω–∞ –Ω–æ–º–µ—Ä–∏</a></li>
    </ul>
  </nav>

  <!-- SPA Root -->
  <main id="app"></main>

  <!-- Chat Toggle & Overlays -->
  <div id="chatToggle" title="–í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç">üí¨</div>
  <div id="namePrompt">
    <div>–©–æ–± —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —á–∞—Ç–æ–º, –≤–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º‚Äô—è üëá</div>
    <input type="text" id="userNameInput" placeholder="–í–∞—à–µ —ñ–º‚Äô—è‚Ä¶"/>
    <button id="continueBtn">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
  </div>
  <div id="chatOverlay">
    <div id="chatHeader">–°–µ—Ä–≤—ñ—Å–Ω–∏–π —á–∞—Ç</div>
    <div id="chatMessages"></div>
    <div class="chat-input">
      <textarea id="userMessage" rows="1" placeholder="–ü–∏—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É‚Ä¶"></textarea>
      <button id="sendBtn" aria-label="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏" title="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M2 21l21-9L2 3v7l15 2-15 2z"/>
        </svg>
      </button>
    </div>
    <div class="powered-by">
      ü§ñ –°–µ—Ä–≤—ñ—Å–Ω–∏–π —á–∞—Ç –ø—Ä–∞—Ü—é—î –∑–∞–≤–¥—è–∫–∏
      <a href="https://t.me/EcoSadybaBot" target="_blank" rel="noopener">EcoSadybaBot</a>
    </div>
  </div>

  <script>
    // Menu toggle
    document.getElementById('menuIcon').addEventListener('click', () => {
      const menu = document.getElementById('menuDropdown');
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    });
    document.querySelectorAll('#menuDropdown a').forEach(a =>
      a.addEventListener('click', () => {
        document.getElementById('menuDropdown').style.display = 'none';
      })
    );

    // Page templates
    const pages = {
      home: () => `
        <header class="site-header">
          <div class="header-box">
            <h1>–ï–∫–æ –°–∞–¥–∏–±–∞ "–ö–∞—Å–∫–∞–¥"</h1>
          </div>
        </header>

        <!-- Carousel -->
        <div class="carousel-container">
          <div class="carousel-slide">
            <img src="https://i.postimg.cc/HWcRpfC8/IMG-20240410-102451.jpg" class="carousel-image active" alt=""/>
            <img src="https://i.postimg.cc/WbVnQKpv/IMG-20240510-205328.jpg" class="carousel-image" alt=""/>
            <img src="https://i.postimg.cc/3xc2JbhW/IMG-20240503-194508.jpg" class="carousel-image" alt=""/>
            <img src="https://i.postimg.cc/ZqNvYbjD/IMG-20240418-165947.jpg" class="carousel-image" alt=""/>
            <img src="https://i.postimg.cc/CLKZBHm8/IMG-20240411-133758.jpg" class="carousel-image" alt=""/>
          </div>
          <div class="overlay"></div>
          <div class="dots"></div>
        </div>

        <!-- Sections -->
        <section class="step-section">
          <div class="step-box" id="harmonyBox">
            <h2>–ö–æ—Ä–æ—Ç–∫–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≥–æ—Ç–µ–ª—å</h2>
            <img src="https://i.postimg.cc/rsxyrjK1/0835a25c-3dfc-4090-b6dd-7fdd9726aa58.png" alt=""/>
            <p>üìû +38 (068) 041-41-42<br/>üìû +38 (096) 793-44-45</p>
            <p>E-mail: eco.kaskad@ukr.net</p>
          </div>
        </section>

        <section class="step-section right">
          <div class="step-box" id="locationBox">
            <h2>–õ–æ–∫–∞—Ü—ñ—è</h2>
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1981.8715377568665!2d23.036433507813427!3d49.25131421415979!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x473bcf4f38b66bad%3A0x2dfebfec8d4ca35e!2z0JXQutC-0KHQsNC00LjQsdCwICLQmtCw0YHQutCw0LQi!5e1!3m2!1sen!2sua!4v1753612438477!5m2!1sen!2sua"
              allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            <p>–õ—å–≤—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å, –°—Ç–∞—Ä–æ—Å–∞–º–±—ñ—Ä—Å—å–∫–∏–π —Ä–∞–π–æ–Ω, —Å. –í. –í–æ–ª–æ—Å—è–Ω–∫–∞</p>
          </div>
        </section>

        <section class="step-section">
          <div class="step-box" id="descriptionBlock">
            <h2>–û–ø–∏—Å —Å–∞–¥–∏–±–∏</h2>
            <p>–ù–∞ –æ–±–ª–∞—à—Ç–æ–≤–∞–Ω—ñ–π —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó —î –¥–≤–æ–ø–æ–≤–µ—Ä—Ö–æ–≤–∏–π –±—É–¥–∏–Ω–æ–∫ –Ω–∞ 6 –∫—ñ–º–Ω–∞—Ç (17 –º—ñ—Å—Ü—å), –∞–ª—å—Ç–∞–Ω–∫–∏ –∑ –º–∞–Ω–≥–∞–ª–∞–º–∏, –≥–æ–π–¥–∞–ª–∫–∞, –≤–æ–¥–æ—Å–ø–∞–¥ —Ç–∞ –∫–∞—Å–∫–∞–¥ –æ–∑–µ—Ä –∑ –ø—Ä–æ—Ç–æ—á–Ω–æ—é –¥–∂–µ—Ä–µ–ª—å–Ω–æ—é –≤–æ–¥–æ—é, —É —è–∫–∏—Ö –º–æ–∂–Ω–∞ –∫—É–ø–∞—Ç–∏—Å—è —Ç–∞ —Ä–∏–±–∞–ª–∏—Ç–∏.</p>
            <p>–£ –∫–æ–∂–Ω—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ —î –¥–≤–æ—Å–ø–∞–ª—å–Ω–µ –ª—ñ–∂–∫–æ, —à–∞—Ñ–∞ –¥–ª—è –æ–¥—è–≥—É, —Ç–µ–ª–µ–≤—ñ–∑–æ—Ä, –≤–µ–ª–∏–∫–∞ —Ç–µ—Ä–∞—Å–∞ —ñ —Å–∞–Ω–≤—É–∑–æ–ª. –û–ø–∞–ª–µ–Ω–Ω—è: –∞–≤—Ç–æ–Ω–æ–º–Ω–µ –≤–æ–¥—è–Ω–µ. –í–æ–¥–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è: —Ö–æ–ª–æ–¥–Ω–∞ —Ç–∞ –≥–∞—Ä—è—á–∞ –≤–æ–¥–∞. –ë–µ–∑–ø–µ—Ä–µ–±—ñ–π–Ω–µ –µ–ª–µ–∫—Ç—Ä–æ–∂–∏–≤–ª–µ–Ω–Ω—è.</p>
            <p>–•–∞—Ä—á—É–≤–∞–Ω–Ω—è: —Ç—Ä–∏—Ä–∞–∑–æ–≤–µ ‚Äî 200 –≥—Ä–Ω. –í–ª–∞—Å–Ω—ñ –º'—è—Å–Ω—ñ —Ç–∞ –º–æ–ª–æ—á–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏, –º–µ–¥, –≥–æ—Ä–æ–¥–∏–Ω–∞, —Ä–∏–±–∞. –ö–∞—Ñ–µ ‚Äî 10 –∫–º, –º–∞–≥–∞–∑–∏–Ω ‚Äî 200 –º.</p>
          </div>
        </section>

        <section class="step-section right">
          <div class="step-box" id="serviceBox">
            <h2>–°–µ—Ä–≤—ñ—Å</h2>
            <p>üöó –ü–∞—Ä–∫—ñ–Ω–≥, –≤–∏–∫–ª–∏–∫ —Ç–∞–∫—Å—ñ</p>
            <p>üì∂ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç Wi-Fi</p>
            <p>üì∫ –°—É–ø—É—Ç–Ω–∏–∫–æ–≤–µ —Ç–µ–ª–µ–±–∞—á–µ–Ω–Ω—è</p>
            <p>üî• –ö–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è –∞–ª—å—Ç–∞–Ω–∫–æ—é, –º–∞–Ω–≥–∞–ª–æ–º</p>
            <p>üéø –ú—ñ—Å—Ü–µ –¥–ª—è —Å—É—à—ñ–Ω–Ω—è –ª–∏–∂ —Ç–∞ —Ä–µ—á–µ–π</p>
            <p>üíß –î–æ—Å—Ç–∞–≤–∫–∞ –º—ñ–Ω–µ—Ä–∞–ª—å–Ω–æ—ó —Å–æ–¥–æ–≤–æ—ó –≤–æ–¥–∏ ‚Äú–†–æ–∑–ª—É—Ü—å–∫–∞‚Äù</p>
            <p>üßº –ü—Ä–∏–±–∏—Ä–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ —Ç–∞ –∑–∞–º—ñ–Ω–∞ —Ä—É—à–Ω–∏–∫—ñ–≤ ‚Äî –∑–∞ –ø–æ—Ç—Ä–µ–±–æ—é</p>
            <p>üõèÔ∏è –ó–º—ñ–Ω–∞ –ø–æ—Å—Ç–µ–ª—ñ ‚Äî 1 —Ä–∞–∑ –Ω–∞ 5 –¥–Ω—ñ–≤</p>
          </div>
        </section>

        <section class="step-section">
          <div class="step-box" id="servicesBox">
            <h2>–ü–æ—Å–ª—É–≥–∏</h2>
            <p>üßñ‚Äç‚ôÇÔ∏è <strong>–°–∞—É–Ω–∞</strong> ‚Äî –∑–∞ –¥–æ–º–æ–≤–ª–µ–Ω—ñ—Å—Ç—é</p>
            <p>üõÅ <strong>–ß–∞–Ω–∏</strong> ‚Äî –ø–æ—Ä—É—á</p>
            <p>üöê <strong>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ñ –ø–æ—Å–ª—É–≥–∏</strong></p>
            <p>üß∫ <strong>–ü—Ä–∞–Ω–Ω—è —Ç–∞ –ø—Ä–∞—Å—É–≤–∞–Ω–Ω—è –æ–¥—è–≥—É</strong></p>
            <h3>–°–ø–æ—Ä—Ç, —Ä–æ–∑–≤–∞–≥–∏</h3>
            <p>üè∏ <strong>–ë–∞–¥–º—ñ–Ω—Ç–æ–Ω</strong></p>
            <p>üêü <strong>–õ–æ–≤–ª—è —Ñ–æ—Ä–µ–ª—ñ</strong> —É –≤–ª–∞—Å–Ω–æ–º—É —Å—Ç–∞–≤–∫—É</p>
            <p>ü•æ <strong>–ü–æ—Ö–æ–¥–∏ –≤ –≥–æ—Ä–∏</strong>, –∑–±–∏—Ä–∞–Ω–Ω—è –≥—Ä–∏–±—ñ–≤ —Ç–∞ —è–≥—ñ–¥</p>
            <p>üêé <strong>–ö–∞—Ç–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω—è—Ö</strong>, –≤–∑–∏–º–∫—É ‚Äî —É —Å–∞–Ω—è—Ö</p>
            <p>üó∫Ô∏è <strong>–ï–∫—Å–∫—É—Ä—Å—ñ—ó</strong> ‚Äî –∑–∞ –¥–æ–º–æ–≤–ª–µ–Ω—ñ—Å—Ç—é</p>
            <p>üíß <strong>800 –º –¥–æ –¥–∂–µ—Ä–µ–ª–∞</strong> ‚Äú–ù–∞—Ñ—Ç—É—Å—è‚Äù —ñ ‚Äú–°–æ–¥–æ–≤–∞‚Äù</p>
            <p>üéø <strong>–ì—ñ—Ä—Å—å–∫–æ–ª–∏–∂–Ω–∏–π –≤–∏—Ç—è–≥</strong> —É —Å. –†–æ–∑–ª—É—á ‚Äî 5 –∫–º</p>
            <p>üèÇ <strong>–°–ø–æ—Ä—Ç–∏–≤–Ω–∞ –±–∞–∑–∞</strong> —É —Å. –°—è–Ω–∫–∏ ‚Äî 38 –∫–º</p>
          </div>
        </section>

        <section class="step-section right">
          <div class="step-box" id="arrivalBox">
            <h2>–Ø–∫ –¥–æ–±—Ä–∞—Ç–∏—Å—å</h2>
            <h3>üöå –ì—Ä–æ–º–∞–¥—Å—å–∫–∏–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º</h3>
            <p>–ú–∞—Ä—à—Ä—É—Ç–∫–∞ –õ—å–≤—ñ–≤‚Äì–°–∞–º–±—ñ—Ä‚Äì–¢—É—Ä–∫–∞ (–≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—ñ–¥ –≤–æ–∫–∑–∞–ª—É –∫–æ–∂–Ω—ñ 30 —Ö–≤). –£ —Å–µ–ª—ñ –¥–æ–º–æ–≤–∏—Ç–∏—Å—å –ø—Ä–æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä.</p>
            <h3>üöó –ê–≤—Ç–æ–º–æ–±—ñ–ª–µ–º</h3>
            <p>–¢—Ä–∞—Å–∞ –ù-13 –õ—å–≤—ñ–≤‚Äì–°–∞–º–±—ñ—Ä‚Äì–£–∂–≥–æ—Ä–æ–¥ –¥–æ –Ø—Å–µ–Ω–∏—Ü—ñ-–ó–∞–º–∫–æ–≤–æ—ó. –ë—ñ–ª—è –¥–≤–æ—Ö –¥–µ—Ä–µ–≤'—è–Ω–∏—Ö –∑—É–ø–∏–Ω–æ–∫ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –ª—ñ–≤–æ—Ä—É—á —ñ —ó—Ö–∞—Ç–∏ ~5 –∫–º.</p>
          </div>
        </section>
      `,
      pricing: () => `
        <section class="step-section">
          <div class="step-box" id="pricingBox">
            <h2>–¶—ñ–Ω–∏ –Ω–∞ –Ω–æ–º–µ—Ä–∏</h2>
            <table>
              <tr><th>–¢–∏–ø –∫—ñ–º–Ω–∞—Ç–∏</th><th>–¶—ñ–Ω–∞ –∑–∞ –¥–æ–±—É</th></tr>
              <tr><td>–°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–≤–æ–º—ñ—Å–Ω–∏–π</td><td>800 –≥—Ä–Ω</td></tr>
              <tr><td>–ù–∞–ø—ñ–≤–ª—é–∫—Å</td><td>1200 –≥—Ä–Ω</td></tr>
              <tr><td>–õ—é–∫—Å</td><td>1500 –≥—Ä–Ω</td></tr>
              <tr><td>–°—ñ–º–µ–π–Ω–∏–π</td><td>1800 –≥—Ä–Ω</td></tr>
            </table>
          </div>
        </section>
      `
    };

    const app = document.getElementById('app');

    // Fade-in for original blocks
    function setupFadeIns() {
      const boxes = [
        'harmonyBox','locationBox','descriptionBlock',
        'serviceBox','servicesBox','arrivalBox'
      ].map(id => document.getElementById(id)).filter(Boolean);

      function fadeIn(elem) {
        const rect = elem.getBoundingClientRect();
        if (rect.top <= window.innerHeight - 100) {
          elem.style.opacity = '1';
          elem.style.transform = 'translateY(0)';
          return true;
        }
        return false;
      }

      function onScroll() {
        if (boxes.every(fadeIn)) {
          window.removeEventListener('scroll', onScroll);
        }
      }

      window.addEventListener('scroll', onScroll);
      window.addEventListener('load', onScroll);
    }

    // Carousel logic (exactly as original)
    function setupCarousel() {
      const images = [...document.querySelectorAll('.carousel-image')];
      const dotsContainer = document.querySelector('.dots');
      let currentIndex = 0;

      // create dots
      dotsContainer.innerHTML = '';
      images.forEach((_, i) => {
        const dot = document.createElement('span');
        dot.className = 'dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', () => goToSlide(i));
        dotsContainer.append(dot);
      });

      function goToSlide(i) {
        images[currentIndex].classList.remove('active');
        images[i].classList.add('active');
        dotsContainer.querySelectorAll('.dot')[currentIndex].classList.remove('active');
        dotsContainer.querySelectorAll('.dot')[i].classList.add('active');
        currentIndex = i;
      }

      setInterval(() => goToSlide((currentIndex + 1) % images.length), 5000);
    }

    // Render + routing
    function render(page) {
      app.innerHTML = pages[page]?.() || pages.home();

      if (page === 'home' || !pages[page]) {
        setupCarousel();
        setupFadeIns();
      } else if (page === 'pricing') {
        // make pricingBox visible immediately
        const pb = document.getElementById('pricingBox');
        if (pb) {
          pb.style.opacity = '1';
          pb.style.transform = 'translateY(0)';
        }
      }
    }

    window.addEventListener('load', () => {
      const start = location.hash.replace('#','') || 'home';
      render(start);
    });
    window.addEventListener('hashchange', () => {
      render(location.hash.replace('#',''));
    });

    // -----------------------
    // Chat integration (enhanced)
    // -----------------------

    // IMPORTANT:
    // - Uses your provided token immediately (no /start required).
    // - Also attempts admin chat auto-discovery and caches it for next visits.

    // Your existing bot token (works out of the box). For better security,
    // you can later switch to AES-encrypted storage.
    const BOT_TOKEN = '7555943126:AAGXkpf5M_pW1MXGa6o5R-Sz84DsUTt2y_M';

    // Optional hardcoded fallback admin chat ID (yours). Kept to avoid any /start step.
    const FALLBACK_CHAT_ID = '627731263';

    const API_BASE  = `https://api.telegram.org/bot${BOT_TOKEN}`;

    let userName = '';
    let adminChatId = null;
    let offset = Number(localStorage.getItem('tg_update_offset') || 0);
    let botReady = false;

    const els = {
      toggle: document.getElementById('chatToggle'),
      namePrompt: document.getElementById('namePrompt'),
      continueBtn: document.getElementById('continueBtn'),
      overlay: document.getElementById('chatOverlay'),
      messages: document.getElementById('chatMessages'),
      textarea: document.getElementById('userMessage'),
      send: document.getElementById('sendBtn'),
      nameInput: document.getElementById('userNameInput')
    };

    // UI: toggle
    els.toggle.onclick = () => {
      if (!userName) {
        els.namePrompt.style.display = els.namePrompt.style.display==='flex' ? 'none' : 'flex';
        if (els.namePrompt.style.display === 'flex') {
          els.nameInput.focus();
        }
      } else {
        els.overlay.style.display = els.overlay.style.display==='flex' ? 'none' : 'flex';
        if (els.overlay.style.display === 'flex') {
          els.textarea.focus();
        }
      }
    };

    // Enter to send, Shift+Enter for newline
    els.textarea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        els.send.click();
      }
    });

    // Continue after name
    els.continueBtn.addEventListener('click', submitName);
    els.nameInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') submitName();
    });

    function submitName() {
      const val = els.nameInput.value.trim();
      if (!val) return;
      userName = val;
      localStorage.setItem('visitor_name', userName);
      els.namePrompt.style.display = 'none';
      els.overlay.style.display = 'flex';
      ensureBotReady().then(() => {
        addMessage('–í—ñ—Ç–∞—î–º–æ! –Ø–∫ –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?', 'bot');
        // Optional: notify admin that a visitor joined
        safeSend(`–ù–æ–≤–∏–π –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á –ø—Ä–∏—î–¥–Ω–∞–≤—Å—è: ${userName}`);
      });
    }

    // Restore previous name if present
    (function restoreName() {
      const saved = localStorage.getItem('visitor_name');
      if (saved) {
        userName = saved;
      }
    })();

    function addMessage(text, from) {
      const div = document.createElement('div');
      div.className = 'msg ' + (from==='user' ? 'from-user' : 'from-bot');
      div.textContent = text;
      els.messages.append(div);
      div.scrollIntoView({behavior:'smooth', block:'end'});
    }

    els.send.onclick = async () => {
      const txt = els.textarea.value.trim();
      if (!txt) return;
      if (!botReady) {
        addMessage('‚è≥ –ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ‚Ä¶ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤—ñ—Å–æ–º.', 'bot');
        return;
      }
      addMessage(txt, 'user');
      els.textarea.value = '';
      await safeSend(`üí¨ ${userName}: ${txt}`);
    };

    // Ensure bot is ready: discover or restore admin chat id, then start polling
    async function ensureBotReady() {
      if (botReady) return true;

      // 1) Try restore from cache
      const cached = localStorage.getItem('tg_admin_chat_id');
      if (cached) {
        adminChatId = cached;
      } else {
        // 2) Try discovery via getUpdates
        adminChatId = await discoverAdminChatId().catch(() => null);
        // 3) Fallback to provided ID to avoid any /start step
        if (!adminChatId) adminChatId = FALLBACK_CHAT_ID;
        localStorage.setItem('tg_admin_chat_id', adminChatId);
      }
      botReady = true;
      startPolling();
      return true;
    }

    async function safeSend(text) {
      try {
        await fetch(`${API_BASE}/sendMessage`, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ chat_id: adminChatId, text })
        });
      } catch (e) {
        console.warn('sendMessage failed', e);
        addMessage('‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.', 'bot');
      }
    }

    async function discoverAdminChatId() {
      try {
        // small window of updates is enough
        const res = await fetch(`${API_BASE}/getUpdates?limit=50`);
        const json = await res.json();
        if (!json.ok) throw new Error('TG error');
        const updates = json.result || [];
        // Prefer the latest private chat message from a human
        for (let i = updates.length - 1; i >= 0; i--) {
          const up = updates[i];
          const msg = up.message || up.edited_message;
          if (!msg) continue;
          if (msg.chat && msg.chat.type === 'private' && msg.from && !msg.from.is_bot) {
            // Update global offset progression
            offset = Math.max(offset, (up.update_id || 0) + 1);
            return String(msg.chat.id);
          }
        }
        return null;
      } catch (e) {
        console.warn('discoverAdminChatId failed', e);
        return null;
      }
    }

    function startPolling() {
      // Avoid duplicate loops
      if (startPolling._started) return;
      startPolling._started = true;
      pollLoop();
    }

    async function pollLoop() {
      try {
        const url = `${API_BASE}/getUpdates?timeout=20&offset=${offset}`;
        const res = await fetch(url);
        const json = await res.json();
        if (json.ok && Array.isArray(json.result)) {
          for (const up of json.result) {
            offset = Math.max(offset, (up.update_id || 0) + 1);
            const msg = up.message || up.edited_message;
            if (!msg) continue;
            // Only show messages from admin chat back to the site chat
            if (String(msg.chat.id) === String(adminChatId) && msg.text && (!msg.from || msg.from.is_bot === false)) {
              addMessage(msg.text, 'bot');
            }
          }
          localStorage.setItem('tg_update_offset', String(offset));
        }
      } catch (e) {
        console.warn('pollLoop error', e);
        // soft backoff
        await new Promise(r => setTimeout(r, 1500));
      } finally {
        setTimeout(pollLoop, 2000);
      }
    }

    // Open chat right away if name already known
    window.addEventListener('load', () => {
      if (userName) {
        els.overlay.style.display = 'flex';
        ensureBotReady().then(() => {
          addMessage('–ü–æ–≤–µ—Ä–Ω—É–ª–∏—Å—è? –ß–∏–º –º–æ–∂—É —â–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏?', 'bot');
        });
      }
    });
  </script>
</body>
</html>
